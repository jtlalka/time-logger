<div id="tooltip" data-ng-init="refresh()">
    <div data-header-directive="data.viewDate | date: 'dd-MM-yyyy'"></div>

    <div class="progress">
        <div class="progress-bar" data-toggle-directive="display.history">
            <span data-ng-repeat="value in daily.values | reduceBy:reduce | sortBy:order track by $index"
                  data-ng-class="value.type"
                  data-ng-show="data.timePerDay > 0"
                  data-width-directive="value.delta data.timePerDay"></span>

            <span class="locked"
                  data-ng-show="data.timePerDay === 0"
                  data-width-directive="100 100"></span>
        </div>
    </div>

    <div class="progress-legend" data-ng-click="toggleDailyHistory()">
        <div data-ng-class="reduce | func: isReduced:'active'">
            <span class="legend active"></span>
            <span class="text-click" data-reduce-directive="reduce 'type' 'active'">Active:</span>
            <span>{{(daily.types.active || 0) | timeFormat}}</span>
        </div>
        <div data-ng-class="reduce | func: isReduced:'idle'">
            <span class="legend idle"></span>
            <span class="text-click" data-reduce-directive="reduce 'type' 'idle'">Idle:</span>
            <span>{{(daily.types.idle || 0) | timeFormat}}</span>
        </div>
        <div data-ng-class="reduce | func: isReduced:'locked'">
            <span class="legend locked"></span>
            <span class="text-click" data-reduce-directive="reduce 'type' 'locked'">Offline:</span>
            <span>{{(daily.types.locked || 0) | timeFormat}}</span>
        </div>
        <div data-ng-class="reduce | func: isReduced">
            <span class="legend total"></span>
            <span class="text-click" data-reduce-directive="reduce">Total:</span>
            <span>{{(daily.types || {}) | countWorkTime | timeFormat}}</span>
        </div>
    </div>

    <div class="history" data-ng-show="display.history">
        <table>
            <thead>
                <tr>
                    <th><span class="text-click" data-order-directive="order 'start'">Begin</span></th>
                    <th><span class="text-click" data-order-directive="order 'stop'">End</span></th>
                    <th><span class="text-click" data-order-directive="order 'type'">Type</span></th>
                    <th><span class="text-click" data-order-directive="order 'delta'">Time</span></th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="value in daily.values | reduceBy:reduce | sortBy:order track by $index">
                    <td>{{value.start | date: 'HH:mm:ss'}}</td>
                    <td>{{value.stop | date: 'HH:mm:ss'}}</td>
                    <td>{{value.type}}</td>
                    <td>{{value.delta | timeFormat}}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="summary" data-ng-switch="daily.overTime > 0">
        <span class="warn" data-ng-switch-when="true">Daily Over Time: {{daily.overTime | timeFormat}}</span>
        <span class="info" data-ng-switch-when="false">Daily Missing Time: {{daily.overTime | timeFormat}}</span>
    </div>

</div>
